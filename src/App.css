:root {
  --bg: #ffffff;
  --fg: #0f172a;
  --muted: #6b7280;
  --card: #f5f7fb;
  --accent: #4c8bf5;
  --border: rgba(100, 116, 139, 0.28);
  /* Keyboard bottom offset for WebView (can be overridden from RN) */
  --kb-offset: 0px;
}
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #000000;
    --fg: #e5e7eb;
    --muted: #a3a3a3;
    --card: #1a1f28;
    --accent: #86a6ff;
    --border: rgba(148, 163, 184, 0.28);
  }
}
#root {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  text-align: left;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

.App {
  height: 100%;
  display: flex;
  flex-direction: column;
  width: 100%;
  background: var(--bg, transparent);
  color: var(--fg, inherit);
}

.editor-container {
  flex: 1;
  min-height: 0;
  display: flex;
  width: 100%;
}

.tiptap-editor {
  flex: 1;
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
  padding: 16px;
  /* Keep caret away from bottom/keyboard */
  padding-bottom: calc(
    40px + env(safe-area-inset-bottom, 0px) + var(--kb-offset, 0px)
  );
  scroll-padding-bottom: calc(
    40px + env(safe-area-inset-bottom, 0px) + var(--kb-offset, 0px)
  );
  background: var(--bg, transparent);
  color: var(--fg, inherit);
}

/* Remove blue focus ring/outlines from editor area */
.tiptap-editor:focus,
.tiptap-editor:focus-visible,
.tiptap-editor *:focus,
.tiptap-editor *:focus-visible {
  outline: none;
}

/* ProseMirror root lives inside EditorContent; ensure no outline */
.tiptap-editor .ProseMirror:focus,
.tiptap-editor .ProseMirror:focus-visible {
  outline: none;
}

/* Soft-wrap long content to avoid horizontal scrolling */
.tiptap-editor,
.tiptap-editor .ProseMirror {
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Make editor and paragraphs occupy full width */
.tiptap-editor .ProseMirror {
  position: relative;
  width: 100%;
}
.tiptap-editor .ProseMirror > * {
  display: block;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  /* 커서가 아래에 있을 때 키보드에 가리지 않도록 여유 */
  scroll-margin-bottom: calc(
    64px + env(safe-area-inset-bottom, 0px) + var(--kb-offset, 0px)
  );
}

/* Compact typography across blocks (paragraphs, headings, lists, quotes) */
.tiptap-editor .ProseMirror {
  line-height: 1.8;
}
.tiptap-editor .ProseMirror p,
.tiptap-editor .ProseMirror h1,
.tiptap-editor .ProseMirror h2,
.tiptap-editor .ProseMirror h3,
.tiptap-editor .ProseMirror h4,
.tiptap-editor .ProseMirror h5,
.tiptap-editor .ProseMirror h6,
.tiptap-editor .ProseMirror ul,
.tiptap-editor .ProseMirror ol,
.tiptap-editor .ProseMirror li,
.tiptap-editor .ProseMirror blockquote,
.tiptap-editor .ProseMirror pre {
  margin: 0;
}
/* spacing between top-level blocks */
.tiptap-editor .ProseMirror > * + * {
  margin-top: 6px;
}
/* list item spacing */
.tiptap-editor .ProseMirror li + li {
  margin-top: 4px;
}
/* nested list indentation and tighter bullets */
.tiptap-editor .ProseMirror ul,
.tiptap-editor .ProseMirror ol {
  padding-left: 1.5em;
}
/* heading line-heights slightly tighter */
.tiptap-editor .ProseMirror h1,
.tiptap-editor .ProseMirror h2,
.tiptap-editor .ProseMirror h3 {
  line-height: 2;
}
.tiptap-editor .ProseMirror h1 {
  font-size: 40px;
}
.tiptap-editor .ProseMirror h2 {
  font-size: 28px;
}
.tiptap-editor .ProseMirror h3 {
  font-size: 20px;
}
/* Ensure each top-level block stretches full width regardless of content length */
.tiptap-editor .ProseMirror > * {
  display: block;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Placeholder styles: show only when the entire editor is empty */
.tiptap-editor .ProseMirror p.is-editor-empty:first-child:last-child::before {
  content: attr(data-placeholder);
  color: #9aa0a6;
  pointer-events: none;
  height: 0;
  float: left; /* keep caret visible and prevent layout issues */
}
.tiptap-editor .ProseMirror p.is-editor-empty:first-child:last-child {
  min-height: 1.4em; /* 빈 줄도 한 줄 높이로 전체 폭 확보 */
}

/* Bible verse block styles */
.bible-verse {
  border: 1px solid var(--border, rgba(100, 116, 139, 0.3));
  border-radius: 8px;
  padding: 8px;
  background: var(--card, #fafafa);
  margin: 8px 0;
  box-sizing: border-box;
  overflow: hidden; /* 내부 입력 박스 라운드가 부모 밖으로 넘치지 않도록 */
}
.bible-verse__label {
  font-size: 15px;
  color: var(--muted, #555);
  margin-bottom: 6px;
  font-weight: 500;
}
.bible-verse__input {
  display: block;
  width: 100%;
  max-width: 100%;
  border: 1px solid var(--border, rgba(100, 116, 139, 0.35));
  border-radius: 6px;
  padding: 8px 10px;
  outline: none;
  background: var(--bg, #fff);
  box-sizing: border-box; /* padding 포함 가로 계산 */
  margin: 0; /* 기본 margin 제거로 넘침 방지 */
  font-size: 15px;
  -webkit-text-size-adjust: 100%; /* iOS 자동 글자 확대 방지 */
  caret-color: #1a73e8; /* 커서 색상 명확히 */
}
.bible-verse--resolved {
  border-left: 4px solid var(--accent, #4c8bf5);
  background: var(--card, #f5f9ff);
}
.bible-verse__header {
  font-size: 13px;
  color: var(--accent, #4c8bf5);
  margin-bottom: 6px;
}
.bible-verse__line {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}
.bible-verse__verse {
  color: var(--accent, #4c8bf5);
  white-space: nowrap;
  word-break: normal;
  overflow-wrap: normal;
  flex: 0 0 auto; /* 수축 방지 */
  min-width: 2ch; /* 1~999까지 한 열에 고정, 탭형 숫자 폭 */
  text-align: center;
  font-variant-numeric: tabular-nums;
  font-size: 15px;
}
.bible-verse__text {
  line-height: 1.6;
  flex: 1 1 auto;
  font-size: 15px;
}
.bible-verse--loading {
  /* loading state: keep same size but invisible content */
  border: 1px solid var(--border, rgba(100, 116, 139, 0.28));
  background: var(--card, #1a1f28);
}
.bible-verse--error {
  border: 1px solid #ffb3b3;
  color: #d00;
  background: #fff5f5;
}
